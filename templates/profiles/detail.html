{% load static %}
<html lang="ta">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>{{ profile.full_name }} | {{ company.name|default:"Matrimony Service" }}</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
<style>
        .profile-id-badge {
            display: inline-block;
            padding: 6px 12px;
            font-weight: bold;
            font-size: 14px;
            border-radius: 20px;
            background-color: #0d6efd;  /* primary blue */
            color: white;
            border: 1px solid #0b5ed7;
            transition: all 0.3s ease-in-out;
            cursor: pointer;
        }
        .sync{
           color:white;
        }
        .sync:hover {
          box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
        }

        .profile-id-badge:hover {
            background-color: #084298; /* darker blue */
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
            transform: translateY(-2px);
        }

        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            background-color: #f4faff;
            color: #333;
        }
        /* Super Header Design */
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 5px solid #ff6b6b;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .logo-container {
            display: flex;
            align-items: center;
        }
        .logo-container img {
            height: 60px;
            margin-right: 15px;
            filter: drop-shadow(0 0 5px rgba(255,255,255,0.3));
        }
        .company-name {
            color: white;
            margin: 0;
            font-size: 28px;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        .header-tagline {
            font-style: italic;
            font-size: 14px;
            opacity: 0.9;
        }
        .header-contact {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }
        .contact-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }
        .contact-item i {
            color: #ffd700;
        }
        
        /* Main Container */
        .container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            padding: 20px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
            border-radius: 5px;
        }
        
        /* Profile Header */
        .profile-header {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 2px dashed #eee;
        }
        .profile-header .title {
            font-weight: bold;
            font-size: 22px;
            margin-bottom: 15px;
            border-left: 5px solid #2a5298;
            padding-left: 15px;
            color: #2a5298;
            text-transform: uppercase;
        }
        .profile-photo-container {
            text-align: center;
            position: relative;
            margin-top: 21px;
        }
        img.profile-photo {
            width: 180px;
            height: auto!important;
            object-fit: cover;
            border: 3px solid #2a5298;
            border-radius: 5px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }
        .profile-id-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            background: #ff6b6b;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* Sections */
        h3 {
            background: linear-gradient(to right, #2a5298, #1e3c72);
            color: white;
            padding: 10px 15px;
            margin-top: 30px;
            border-radius: 5px 5px 0 0;
            font-size: 18px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        td, th {
            border: 1px solid #ddd;
            padding: 12px;
            vertical-align: top;
            text-align: left;
        }
        th {
            background-color: #f0f8ff;
            font-weight: bold;
            color: #1e3c72;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        /* Horoscope Charts */
        .horoscope-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }
        .chart-box {
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            flex: 1 1 400px;
            background-color: #f9f9f9;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .chart-title {
            text-align: center;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 15px;
            font-size: 18px;
            padding-bottom: 5px;
            border-bottom: 2px solid #1e3c72;
        }
        .grid {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        grid-template-rows: repeat(4, 1fr) !important;
        border: 1px solid #aaa !important;
        background: #fff !important;
    }

    .cell {
        border: 1px solid #aaa;
        min-height: 60px; /* adjust size */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
    }
        /*.grid {
            /*display: grid;
            grid-template-columns: repeat(3, 1fr);
            border: 1px solid #aaa;
            background-color: white;*/
           /* display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 cells per row */*/
            /*gap: 10px; /* optional spacing between cells */*/
        }*/
        .cell {
            border: 1px solid #aaa;
            padding: 10px;
            height: 80px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 14px;
            font-weight: bold;
        }
        
        /* Super Footer Design */
        .footer {
            margin-top: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-top: 5px solid #ff6b6b;
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            color: white;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 -3px 10px rgba(0,0,0,0.1);
        }
        .footer-heading {
            font-size: 20px;
            margin-bottom: 15px;
            color: #ffd700;
            text-transform: uppercase;
        }
        .contact-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }
        .footer-contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        .footer-contact-item i {
            color: #ffd700;
            font-size: 18px;
        }
        .social-links {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        .social-links a {
            color: white;
            font-size: 24px;
            transition: all 0.3s;
        }
        .social-links a:hover {
            color: #ffd700;
            transform: scale(1.2);
        }
        .copyright {
            width: 100%;
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 14px;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                padding: 15px;
            }
            .logo-container {
                justify-content: center;
                margin-bottom: 15px;
            }
            .header-contact {
                align-items: center;
                margin-top: 15px;
            }
            .profile-header {
                flex-direction: column;
            }
            img.profile-photo {
                width: 150px;
                height: auto!important;
                margin-top: 20px;
            }
            .horoscope-container {
                flex-direction: column;
            }
            .footer {
                flex-direction: column;
                gap: 20px;
            }
            .contact-info {
                flex-direction: column;
                gap: 15px;
            }
            .logo-container img {
                height:35px!important;
                width:auto!important;
        }
    }
    /* Mobile fix for sibling table */
        @media (max-width: 768px) {
          .siblings-table {
            display: block;
            width: 100%;
            overflow-x: auto;   /* allow smooth horizontal scroll */
            -webkit-overflow-scrolling: touch;
          }

          .siblings-table table {
            min-width: 500px;   /* ensure table doesn't collapse */
          }

          .siblings-table th,
          .siblings-table td {
            font-size: 12px;   /* smaller font on mobile */
            padding: 6px;
          }
           .chart-box {
                border: 1px solid #ccc;
                padding: 0!important;
                margin-bottom: -110px!important;
            }
            .horoscope-container{
                margin-bottom: -80px!important;
            }
        }



        /* Print Styles - Ensures single page without alignment changes */
        
    @media print {
      @page { size: A4 portrait; margin: 0; }

      html, body {
        margin: 0 !important;
        padding: 0 !important;
        background: #fff !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      /*title*/
      .hd{
        display: none!important;
      }
      /* Remove header & footer completely */
     .footer { display: none !important; }

      /* Logo only, centered */
      .logo {
        display: block !important;
        margin: 0 auto 5mm auto !important;
        text-align: center !important;
      }

      /* Profile header layout fix: details + photo */
      .profile-header {
        display: grid !important;
        grid-template-columns: 1fr 40mm;
        gap: 2mm !important;
        align-items: start !important;
        margin: 0 !important;
        padding: 0 !important;
        border: none !important;
      }

      img.profile-photo {
        width: 20mm !important;
        height: auto !important;
        object-fit: cover !important;
        border: 1px solid #2a5298 !important;
      }

      /* Compact tables */
      table { width: 100% !important; font-size: 9.5pt; border-collapse: collapse !important; margin: 0 !important; }
      th, td { padding: 2px !important; border: 1px solid #aaa !important; vertical-align: top; }

      /* Horoscope side by side */
      .horoscope-container {
        display: flex !important;
        flex-direction: row !important;
        gap: 2mm !important;
        align-items: stretch !important;
        margin: 0 !important;
        padding: 0 !important;
        page-break-inside: avoid !important;
      }

      .chart-box {
        flex: 1 1 0 !important;
        margin: 0 !important;
        padding: 2mm !important;
        background: #fff !important;
        border: 1px solid #aaa !important;
        page-break-inside: avoid !important;
      }

      .chart-title {
        font-size: 9pt !important;
        margin-bottom: 0.5mm !important;
        text-align: center !important;
        border-bottom: 1px solid #1e3c72 !important;
      }

      /*.grid {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        border: 1px solid #aaa !important;
        background: #fff !important;
      }*/

      /*.cell {
        border: 1px solid #aaa !important;
        height: 28px !important;
        font-size: 9pt !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
      }*/

      .grid {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        grid-template-rows: repeat(4, 1fr) !important;
        border: 1px solid #aaa !important;
        background: #fff !important;
    }

    .cell {
        border: 1px solid #aaa;
        min-height: 58px; /* adjust size */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 14px;
    }


      /* Tight spacing for all sections */
      h1, h2, h3 { margin: 1mm 0 1mm 0 !important; font-size: 8pt !important; }
      .section { margin: 0 !important; padding: 0 !important; }

      /* Hide buttons */
      .no-print, .switch-photo-btn { display: none !important; }

      /* Avoid page breaks */
      h1, h2, h3, table, .profile-header, .chart-box, .grid, .cell {
        page-break-inside: avoid !important;
        page-break-after: avoid !important;
      }
      .profile-photo-container {
        text-align: center;
        position: relative;
        margin-top: -10px!important;
    }
    .profile-id-badge{
        display: none !important; 
    }
    .header-contact, .parter_exp{
        display: none !important; 
    }
    .logo-container{
        height:100pxImportant;
        width: auto!important;
    }
    .container {
        padding:0!important;
        padding-left: 5px!important;
        padding-right: 5px!important;
    }
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div class="logo-container">
            {% if company.logo %}
                <img alt="{{ company.name }} Logo" src="{{ company.logo.url }}"/>
            {% else %}
                <img alt="Matrimony Logo" src="{% static 'images/logo.png' %}"/>
            {% endif %}
           <!--  <div>
                <h1 class="company-name">{{ company.name|default:"PREMIUM MATRIMONY" }}</h1>
                <div class="header-tagline">Connecting Hearts Since 1990</div>
            </div> -->
</div>
<div class="header-contact">
            {% if company.phone1 %}
                <div class="contact-item">
<i class="fas fa-phone"></i> {{ company.phone1 }}
                </div>
            {% endif %}
            {% if company.email %}
                <div class="contact-item">
<i class="fas fa-envelope"></i> {{ company.email }}
                </div>
            {% endif %}
        </div>
</div>
<br/>
<div class="profile-header">
<div>
<div class="title">Bio Data</div>
<table>
<tr>
<td><strong>Profile ID:</strong></td>
<td>PM00{{ profile.id }}</td>
</tr>
<tr>
<td><strong>Name:</strong></td>
<td>{{ profile.full_name }}</td>
</tr>
<tr>
<td><strong>Gender:</strong></td>
<td>{{ profile.gender }}</td>
</tr>
<tr>
<td><strong>Age:</strong></td>
<td>{{ profile.age }} years</td>
</tr>
<tr>
<td><strong>DOB:</strong></td>
<td>
                            {% if profile.dob %}{{ profile.dob|date:"d/m/Y" }}{% endif %}
                            {% if profile.birth_time %} - {{ profile.birth_time|time:"H:i" }}{% endif %}
                        </td>
</tr>
<tr>
<td><strong>Caste/Subcaste:</strong></td>
<td>
                            {% if profile.caste %}{{ profile.caste }}{% endif %}
                            {% if profile.subcaste %} - {{ profile.subcaste }}{% endif %}
                        </td>
</tr>
</table>
</div>
<div class="profile-photo-container">
                {% if show_photo1 and profile.photo %}
                    <img alt="Profile Photo" class="profile-photo" src="{{ profile.photo.url }}"/>
                {% elif profile.photo2 %}
                    <img alt="Profile Photo" class="profile-photo" src="{{ profile.photo2.url }}"/>
                {% else %}
                    <img alt="Profile Photo" class="profile-photo" src="{% static 'images/default_profile.jpg' %}"/>
                {% endif %}
                <div class="profile-id-badge">
                  {% if profile.photo and profile.photo2 %}
                      <a class="switch-photo-btn" href="?switch_photos=1">
<i class="fas fa-sync-alt sync"></i>
</a>
                  {% endif %}
                </div>
</div>
</div>
<!-- Rest of your content remains exactly the same -->
<h3>Family &amp; Personal Details</h3>
<table>
<tr>
<td><strong>Parents:</strong></td>
<td>
                    {% if profile.father_alive and profile.mother_alive %}
                        Both parents alive
                    {% elif profile.father_alive %}
                        Father alive
                    {% elif profile.mother_alive %}
                        Mother alive
                    {% else %}
                        -
                    {% endif %}
                </td>
</tr>
<tr>
<td><strong>Father's Name and Occupation:</strong></td>
<td>{{profile.contact_person}} - {{ profile.father_occupation|default:"-" }}</td>
</tr>
<tr>
<td><strong>Mother's Occupation:</strong></td>
<td>{{ profile.mother_occupation|default:"-" }}</td>
</tr>
<tr>
<td><strong>Contact:</strong></td>
<td>{{ profile.contact_number|default:"-" }} Whats App {{profile.alternate_contact}}</td>
</tr>
<tr>
<td><strong>Current Location:</strong></td>
<td>
                    {% if profile.city %}{{ profile.city }}{% endif %}
                    {% if profile.state %}, {{ profile.state }}{% endif %}
                    {% if profile.country %}, {{ profile.country }}{% endif %}
                </td>
</tr>
</table>
<h3>Siblings Detailed Information</h3>
<table>
<tr>
<td colspan="6">
<h3>Siblings Detailed Information</h3>
<div class="siblings-table">
  <table border="0" cellpadding="0" cellspacing="0" style="border: 1px solid #555555;" width="100%">
    <tbody>
      <tr style="height: 20px; vertical-align: middle; background-color: #f0f0f0;">
        <th>Relationship</th>
        <th>Elder Brother</th>
        <th>Younger Brother</th>
        <th>Elder Sister</th>
        <th>Younger Sister</th>
      </tr>
      <tr>
        <td><b>Married</b></td>
        <td>{{ sibling_counts.elder_brother.married|default:"0" }}</td>
        <td>{{ sibling_counts.younger_brother.married|default:"0" }}</td>
        <td>{{ sibling_counts.elder_sister.married|default:"0" }}</td>
        <td>{{ sibling_counts.younger_sister.married|default:"0" }}</td>
      </tr>
      <tr>
        <td><b>Unmarried</b></td>
        <td>{{ sibling_counts.elder_brother.unmarried|default:"0" }}</td>
        <td>{{ sibling_counts.younger_brother.unmarried|default:"0" }}</td>
        <td>{{ sibling_counts.elder_sister.unmarried|default:"0" }}</td>
        <td>{{ sibling_counts.younger_sister.unmarried|default:"0" }}</td>
      </tr>
    </tbody>
  </table>
</div>

</td>
</tr>
</table>
<h3>Education &amp; Career</h3>
<table>
<tr>
<td><strong>Education:</strong></td>
<td>{{ profile.education|default:"-" }}</td>
</tr>
<tr>
<td><strong>Occupation:</strong></td>
<td>{{ profile.occupation|default:"-" }}</td>
</tr>
<tr>
<td><strong>Income:</strong></td>
<td>{{ profile.income|default:"-" }}</td>
</tr>
<tr>
<td><strong>Place of Work:</strong></td>
<td>{{ profile.place_of_job|default:"-" }}</td>
</tr>
</table>
<h3>Physical Attributes</h3>
<table>
<tr>
<td><strong>Height:</strong></td>
<td>{{ profile.height_cm|default:"-" }} cm</td>
</tr>
<tr>
<td><strong>Weight:</strong></td>
<td>{{ profile.weight_kg|default:"-" }} kg</td>
</tr>
<tr>
<td><strong>Complexion:</strong></td>
<td>{{ profile.complexion|default:"-" }}</td>
</tr>
<tr>
<td><strong>Diet:</strong></td>
<td>{{ profile.diet|default:"-" }}</td>
</tr>
</table>

        {% if profile.rasi_cells or profile.amsam_cells %}
        <h3 class="hd">Horoscope Details</h3>
<div class="horoscope-container">
            {% if profile.rasi_cells %}
            <div class="chart-box">
<div class="chart-title">RASI CHART</div>
<div class="grid">
                    {% for cell in profile.rasi_cells %}
                        <div class="cell">{{ cell|default:"" }}</div>
                    {% endfor %}
                </div>
</div>
            {% endif %}
            
            {% if profile.amsam_cells %}
            <div class="chart-box">
<div class="chart-title">AMSAM CHART</div>
<div class="grid">
                    {% for cell in profile.amsam_cells %}
                        <div class="cell">{{ cell|default:"" }}</div>
                    {% endfor %}
                </div>
</div>
            {% endif %}
        </div>
        {% endif %}

        <h3 class="parter_exp">Partner Expectations</h3>
<table class="parter_exp">
<tr>
<td><strong>Age Range:</strong></td>
<td>{{ profile.expected_marital_status|default:"-" }}</td>
</tr>
<tr>
<td><strong>Education:</strong></td>
<td>{{ profile.expected_qualification|default:"-" }}</td>
</tr>
<tr>
<td><strong>Occupation:</strong></td>
<td>{{ profile.expected_job|default:"-" }}</td>
</tr>
<tr>
<td><strong>Income:</strong></td>
<td>{{ profile.expected_income|default:"-" }}</td>
</tr>
<tr>
<td><strong>Caste/Subcaste:</strong></td>
<td>
                    {% if profile.expected_caste %}{{ profile.expected_caste }}{% endif %}
                    {% if profile.expected_subcaste %} - {{ profile.expected_subcaste }}{% endif %}
                </td>
</tr>
<tr>
<td><strong>Other Expectations:</strong></td>
<td>{{ profile.other_expectations|default:"-" }}</td>
</tr>
</table>
<!-- Super Footer -->
<div class="footer">
<div>
<div class="footer-heading">Contact Us</div>
<div class="contact-info">
                    {% if company.address %}
                    <div class="footer-contact-item">
<i class="fas fa-map-marker-alt"></i> {{ company.address }}
                    </div>
                    {% endif %}
                    {% if company.phone1 %}
                    <div class="footer-contact-item">
<i class="fas fa-phone"></i> {{ company.phone1 }}
                    </div>
                    {% endif %}
                    {% if company.phone2 %}
                    <div class="footer-contact-item">
<i class="fas fa-phone-alt"></i> {{ company.phone2 }}
                    </div>
                    {% endif %}
                    {% if company.email %}
                    <div class="footer-contact-item">
<i class="fas fa-envelope"></i> {{ company.email }}
                    </div>
                    {% endif %}
                   <!--  {% if company.whatsapp %}
                    <div class="footer-contact-item">
                        <i class="fab fa-whatsapp"></i> {{ company.whatsapp }}
                    </div>
                    {% endif %} -->
</div>
</div>
<!--   <div>
                <div class="footer-heading">Follow Us</div>
                <div class="social-links">
                    {% if company.website %}
                    <a href="{{ company.website }}" target="_blank"><i class="fas fa-globe"></i></a>
                    {% endif %}
                    {% if company.facebook %}
                    <a href="{{ company.facebook }}" target="_blank"><i class="fab fa-facebook-f"></i></a>
                    {% endif %}
                    {% if company.instagram %}
                    <a href="{{ company.instagram }}" target="_blank"><i class="fab fa-instagram"></i></a>
                    {% endif %}
                    {% if company.twitter %}
                    <a href="{{ company.twitter }}" target="_blank"><i class="fab fa-twitter"></i></a>
                    {% endif %}
                </div>
            </div> -->
<div class="copyright">
                © {{ company.name}} {% now "Y" %}. All Rights Reserved | Designed By <b style="color:red">♥</b> <a href="https://ramanfullstackdeveloper.rf.gd/" style="color: white;" target="_blank">Raman Fullstack Developer</a>
            </div>
</div>
</div>
</body>
</html>